/*
 --------------------------------------------------------------------------
 Swapform (v1.0): swapform.js
 Licensed under MIT (https://github.com/runthis/swapform/blob/main/LICENSE)
 --------------------------------------------------------------------------
*/
'use strict';class FormControl{constructor(){this.default();this.event()}default(){for(let a of this.elements())this.create(a),this.empty(a)||this.class(this.prev(a)).contains("sf-label-active")||this.planimate(this.prev(a),function(b,c){c.blur(c.next(b),c)}),-1!=a.className.indexOf("sf-textarea")&&-1==a.className.indexOf("-fixed")&&this.rows(a)}event(){for(let a of this.elements())a.addEventListener("focus",()=>{this.focus(a,this)}),a.addEventListener("blur",()=>{this.blur(a,this)}),-1!=a.className.indexOf("sf-textarea")&&
-1==a.className.indexOf("-fixed")&&a.addEventListener("input",b=>{this.rows(a)})}focus(a,b){b.empty(a)||b.swap(b.prev(a),"description");b.class(b.prev(a)).remove("sf-label-filled");b.class(b.prev(a)).contains("sf-label-active")||(b.class(b.prev(a)).add("sf-label-active"),b.swap(b.prev(a),"description"));b.borders(a)}blur(a,b){b.empty(a)?("date"!=a.type&&(b.class(b.prev(a)).remove("sf-label-active"),b.next(b.next(a).firstElementChild).classList.remove("sf-label-no-border-top")),b.swap(b.prev(a),"originaltext")):
(b.class(b.prev(a)).add("sf-label-filled"),b.class(b.prev(a)).contains("sf-label-active")||b.class(b.prev(a)).add("sf-label-active"),b.data(b.prev(a)).filled?b.swap(b.prev(a),"filled"):b.swap(b.prev(a),"originaltext"),b.borders(a))}swap(a,b){this.data(a).originaltext||(this.data(a).originaltext=a.innerHTML);this.data(a)[b]&&(a.innerHTML=this.data(a)[b])}elements(){let a=[],b=["file","color","range"];for(let c of this.query())-1==b.indexOf(c.nextElementSibling.type)?a.push(c.nextElementSibling):this.class(c).remove("sf-label");
return a}query(){return document.querySelectorAll('[class^="sf-label"]')}filled(a){if(this.data(a).description){let b=a.innerHTML;a.innerHTML=this.data(a).description;this.data(a).description=b}}planimate(a,b){a.style.transition="none";b(a,this);a.style.transition=""}data(a){return a.dataset}class(a){return a.classList}prev(a){return a.previousElementSibling}next(a){return a.nextElementSibling}empty(a){return void 0!==a.value?0==a.value.length:void 0!==a.innerText?0==a.innerText.trim().length:!1}widths(a,
b){return this.class(a).contains("sf-label-sm")||this.class(a).contains("sf-label-filled")||!this.empty(this.next(a))?b:.75*b}create(a){let b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div");b.className="sf-form-slot";c.className="sf-form-slot-left";d.className="sf-form-slot-middle";e.className="sf-form-slot-right";b.appendChild(c);b.appendChild(d);b.appendChild(e);a.after(b)}rows(a){a.style.height&&"32px"!=a.style.height&&
(a.style.height="32px");a.scrollHeight!=a.clientHeight&&(a.style.height=a.scrollHeight+32+"px")}borders(a){let b=this.prev(a).offsetLeft,c=this.widths(this.prev(a),this.prev(a).offsetWidth)+2;a=this.next(a).firstElementChild;a.style.width=b+"px";this.next(a).style.width=c+"px";this.next(a).classList.add("sf-label-no-border-top")}}(function(){new FormControl})();
//# sourceMappingURL=swapform.js.map
